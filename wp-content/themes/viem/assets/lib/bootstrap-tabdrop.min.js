/* =========================================================
 * bootstrap-tabdrop.js 
 * http://www.eyecon.ro/bootstrap-tabdrop
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(a){var b=function(){var d,b=[],c=!1,e=function(a){clearTimeout(d),d=setTimeout(f,100)},f=function(){for(var a=0,c=b.length;a<c;a++)b[a].apply()};return{register:function(d){b.push(d),c===!1&&(a(window).bind("resize",e),c=!0)},unregister:function(a){for(var c=0,d=b.length;c<d;c++)if(b[c]==a){delete b[c];break}}}}(),c=function(c,d){this.element=a(c),this.dropdown=a('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+d.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element),this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup"),b.register(a.proxy(this.layout,this)),this.layout()};c.prototype={constructor:c,layout:function(){var b=[];this.dropdown.removeClass("hide"),this.element.append(this.dropdown.find("li")),console.log(this.element);var c=this,d=0,e=this.element.find(".nav-tab-title"),f=this.element.find(">li").not(".tabdrop").not(e);if(f.each(function(){d+=a(this).outerWidth()}),d>a(c.element).outerWidth()-(e.outerWidth()+c.element.find(".tabdrop").outerWidth()))for(var g=f.length-1;g>=0;g--){var h=f[g];if(d-a(h).outerWidth()<a(c.element).outerWidth()-(e.outerWidth()+c.element.find(".tabdrop").outerWidth())){b.push(h);break}b.push(h),d-=a(h).outerWidth()}b.length>0?(b=a(b.reverse()),this.dropdown.find("ul").empty().append(b),1==this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")):this.dropdown.addClass("hide")}},a.fn.dhtabdrop=function(b){return this.each(function(){var d=a(this),e=d.data("dhtabdrop"),f="object"==typeof b&&b;e||d.data("dhtabdrop",e=new c(this,a.extend({},a.fn.dhtabdrop.defaults,f))),"string"==typeof b&&e[b]()})},a.fn.dhtabdrop.defaults={text:'<i class="icon-align-justify"></i>'},a.fn.dhtabdrop.Constructor=c}(window.jQuery);