!function(i){i.megamenu=function(t,n){var e=i(t);i.extend({animation:300},n);methods={loadImages:function(t){i("img",i(t)).each(function(){""!=i(this).attr("data-src")&&(i(this).attr("src",i(this).attr("data-src")),i(this).attr("data-src",""))})},init:function(){0==dt_megamenu.ajax_enabled&&e.find(".sub-grid-content").each(function(){i(this).appendTo(i(this).parent().parent())}),e.find(".menu-mobile").on("click",function(){e.find(".menu").toggleClass("open")}),i(window).resize(function(){e.find(".menu").removeClass("open")}),e.find(".grid-title").each(function(){i(this).on("hover",function(){methods.displayChannel(i(this))})}),e.find(".level0").hover(function(){if(i(this).addClass("hover"),0==i(this).find(".sub-content-active").length){var t=i(this).parent().find(".sub-content-active");if(0==t.length){var n=i(this).find(".sub-content");0<n.length&&(n.addClass("sub-content-active"),0==n.find(".sub-grid-tabs .hover").length&&methods.displayChannel(n.find(".sub-grid-tabs .grid-title:eq(0)")))}else{var e=i(this).find(".sub-content");e.addClass("sub-content-active"),t.removeClass("sub-content-active"),0==e.find(".sub-grid-tabs .hover").length&&methods.displayChannel(e.find(".sub-grid-tabs .grid-title:eq(0)"))}}},function(){i(this).removeClass("hover"),setTimeout(i.proxy(function(){0==i(this).find(".menu>.hover").length&&(sub=i(this).find(".sub-content"),sub.removeClass("sub-content-active"))},e),300)})},displayChannel:function(t){var n="#"+i(t).attr("data-target");if(i(t).parent().parent().find(".sub-grid-content").removeClass("open"),0==i(n).length){if(0!=dt_megamenu.ajax_enabled){var e=i('<div class="sub-grid-content open" id="'+i(t).attr("data-target")+'"><div class="content-inner row"><div class="loading">\x3c!-- --\x3e</div></div></div>');i(t).parent().parent().append(e),methods.getChannelContent(n,i(t).attr("data-object"),i(t).attr("data-id"),i(t).attr("data-post"))}}else methods.loadImages(n),i(n).addClass("open");i(t).parent().find(".grid-title").removeClass("hover"),i(t).addClass("hover")},getChannelContent:function(a,t,n,e){i.ajax({type:"POST",cache:!1,url:dt_megamenu.ajax_url,data:{action:"dt_megaMenu_getGridContent",data:new Array(t,n,e)},error:function(t,n,e){0},success:function(t,n,e){i(a).find(".content-inner").html(t)}})}},methods.init()},i.fn.megamenu=function(t){return new i.megamenu(this,t)}}(jQuery),jQuery(document).ready(function(t){t(".viem-megamenu").megamenu()});